#ðŸŒç½‘ç»œæŠ¥æ–‡æ ¼å¼
#ComputerNetwork
# 1ã€æŠ¥æ–‡æ ¼å¼

> - VRRPæŠ¥æ–‡è¢«å°è£…åœ¨IPåŒ…ä¸­ã€‚
>
> - ä½¿ç”¨ä¸“é—¨çš„VRRP IPv4ç»„æ’­åœ°å€
> - IPåè®®å·ä¸º112
> - ç»„æ’­åœ°å€224.0.0.18ã€‚è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°èŒƒå›´çš„å¤šæ’­åœ°å€ã€‚ä¸è®ºTTLçš„å€¼æ˜¯å¤šå°‘ï¼Œè·¯ç”±å™¨éƒ½è¢«ç¦æ­¢è½¬å‘ä»¥æ­¤åœ°å€ä¸ºç›®æ ‡åœ°å€çš„æŠ¥æ–‡
> - VRRPæŠ¥æ–‡çš„IPå¤´ä¸­ï¼ŒTTLå¿…é¡»ä¸º225.å½“VRRPè·¯ç”±å™¨æŽ¥æ”¶åˆ°çš„TTlä¸ç­‰äºŽ255çš„VRRPåè®®æŠ¥æ–‡åŽï¼Œç›´æŽ¥ä¸¢å¼ƒ

==æœ¬æ–‡æ‰€æè¿°çš„VRRPv2é’ˆå¯¹IPv4==

- VRRPæŠ¥æ–‡æ ¼å¼

![VRRPæŠ¥æ–‡æ ¼å¼](http://www.023wg.com/message/message/image/vrrp-format.png)

-tx-
| å­—æ®µ                | é•¿åº¦  | æè¿°                                                         |
| ------------------- | ----- | ------------------------------------------------------------ |
| Version             | 4bit  | VRRPåè®®ç‰ˆæœ¬                                                 |
| Type                | 4bit  | - VRRPæŠ¥æ–‡çš„ç±»åž‹ã€‚æœ¬ç‰ˆæœ¬çš„åè®®ä»…è§„å®šäº†ä¸€ä¸ªæŠ¥æ–‡ç±»åž‹ï¼š         |\
|                     |       | 1ã€ADVERTISEMENT                                             |\
|                     |       | - å¸¦æœ‰æœªçŸ¥ç±»åž‹çš„ç¢‘æ–‡å¿…é¡»è¢«ä¸¢å¼ƒ                               |
| Virtual Rtr ID8     | 8bit  | è™šæ‹Ÿè·¯ç”±å™¨æ ‡è¯†ï¼ˆVRIDï¼‰å­—æ®µæ ‡è¯†äº†æ­¤æŠ¥æ–‡æ‰€æŠ¥å‘ŠçŠ¶æ€çš„è™šæ‹Ÿè·¯ç”±å™¨ |\
|                     |       | å¯è®¾ç½®çš„èŒƒå›´æ˜¯1 - 255ã€‚æ²¡æœ‰ç¼ºçœå€¼                            |
| Priority            | 8bit  | - è¯¥å­—æ®µå£°æ˜Žäº†æ­¤æŠ¥æ–‡çš„VRRPè·¯ç”±å™¨çš„ä¼˜å…ˆçº§ã€‚å€¼è¶Šé«˜ä¼˜å…ˆçº§è¶Šé«˜ã€‚è¯¥å­—æ®µä¸º8ä¸ºæ— ç¬¦å·æ•´åž‹ |\
|                     |       | - è‹¥VRRPè·¯ç”±å™¨æ˜¯è™šæ‹Ÿè·¯ç”±å™¨çš„IPåœ°å€æ‰€æœ‰è€…ï¼Œé‚£ä¹ˆå…¶ä¼˜å…ˆçº§å¿…é¡»æ˜¯255.èµ·å¤‡ç”¨ä½œç”¨çš„VRRPè·¯ç”±å™¨çš„ä¼˜å…ˆçº§å¿…é¡»åœ¨1 - 254ä¹‹é—´ã€‚ç¼ºçœçš„VRRPè·¯ç”±å™¨ä¼˜å…ˆçº§ä¸º100 |\
|                     |       | - ä¼˜å…ˆçº§å€¼0ï¼Œç”¨äºŽæŒ‡ç¤ºå½“å‰è™šæ‹Ÿè·¯ç”±å™¨çš„ä¸»è·¯ç”±å™¨åœæ­¢å‚ä¸ŽVRRPç»„ã€‚ä¸»è¦ç”¨äºŽè§¦å‘å¤‡ç”¨è·¯ç”±å™¨å¿«é€Ÿåœ°è¿ç§»åˆ°ä¸»è·¯ç”±å™¨ï¼Œè€Œä¸ç”¨ç­‰å¾…å½“å‰ä¸»è·¯ç”±å™¨è¶…æ—¶ |
| Count IP Addrs      | 8bit  | åœ¨æ­¤VRRPé€šå‘Šä¸­åŒ…å«çš„IPåœ°å€æ•°é‡          |
| Auth Type           | 8bit  | - è®¤è¯å­—æ®µç”¨äºŽæ ‡è¯†è¦ç”¨åˆ°çš„è®¤è¯æ–¹æ³•ã€‚åœ¨ä¸€ä¸ªè™šæ‹Ÿè·¯ç”±å™¨ç»„å†…è®¤è¯ç±»åž‹æ˜¯æƒŸä¸€çš„ã€‚è®¤è¯ç±»åž‹å­—æ®µæ˜¯ä¸€ä¸ª8ä½æ— ç¬¦å·æ•´åž‹ |\
|                     |       | - å¦‚æžœæŠ¥æ–‡æºå¸¦æœªçŸ¥çš„è®¤è¯ç±»åž‹æˆ–è€…è¯¥è®¤è¯ç±»åž‹å’Œæœ¬åœ°é…ç½®çš„è®¤è¯æ–¹æ³•ä¸åŒ¹é…ï¼Œé‚£ä¹ˆè¯¥æŠ¥æ–‡å¿…é¡»è¢«ä¸¢å¼ƒ |\
|                     |       | ç›®å‰å®šä¹‰çš„è®¤è¯æ–¹æ³•æœ‰ï¼š                                       |\
|                     |       | - 0 - No Authentication ä¸è®¤è¯                               |\
|                     |       | è¯¥è®¤è¯ç±»åž‹è¡¨æ˜ŽVRRPåè®®æŠ¥æ–‡çš„äº¤æ¢ä¸éœ€è¦è®¤è¯ã€‚åœ¨å‘é€VRRPåè®®æŠ¥æ–‡æ—¶ï¼ŒAuthentication Dataå­—æ®µå°†è¢«ç½®ä¸º0ï¼› |\
|                     |       | è€Œåœ¨æŽ¥æ”¶åè®®æŠ¥æ–‡æ—¶ï¼ŒAuthentication Dataå­—æ®µè¢«å¿½ç•¥            |\
|                     |       | - 1 - Reserved ä¿ç•™                     |\
|                     |       | - 2 - Reversed ä¿ç•™                     |\
|                     |       | **è¯´æ˜Žï¼š**                |\
|                     |       | ==VRRPçš„æ—©æœŸç‰ˆæœ¬ å®šä¹‰äº†ä¸€äº›è®¤è¯ç±»åž‹[RFC2338]ã€‚è¿™äº›è®¤è¯ç±»åž‹çš„å®šä¹‰å·²ç»åœ¨æœ¬æ–‡æ¡£ä¸­è¢«åˆ é™¤ï¼Œå› ä¸ºæ ¹æ®å®žé™…ç»éªŒè¡¨æ˜Žï¼Œè¿™äº›è®¤è¯æ–¹æ³•å¹¶ä¸èƒ½æä¾›ä»»ä½•çœŸæ­£çš„å®‰å…¨ä¿éšœï¼Œå¹¶ä¸”ä»…ä¼šå¯¼è‡´åœ¨ä¸€ä¸ªVRRPç»„å†…å‡ºçŽ°å¤šä¸ªMasterçš„æƒ…å†µã€‚== |
| Adver Int           | 8bit  | VRRPé€šå‘Šé—´éš”æ—¶é—´ï¼Œå•ä½ä¸ºsã€‚ç¼ºçœä¸º1sã€‚è¿™ä¸ªå­—æ®µä¸»è¦ç”¨äºŽé”™è¯¯é…ç½®è·¯ç”±å™¨æ—¶çš„æ•…éšœå®šä½å’Œè§£å†³ |
| Checksum            | 16bit | æ ¡éªŒå’Œ å­—æ®µç”¨äºŽæ£€æµ‹VRRPæ¶ˆæ¯çš„æ•°æ®æ˜¯å¦å‡ºé”™      |\
|                     |       | æ ¡éªŒå’Œ æ˜¯ä»ŽVersionå­—æ®µå¼€å§‹çš„æ•´ä¸ªVRRPæ¶ˆæ¯çš„1çš„16ä½è¡¥ç å’Œã€‚    |
| IP Address          | 32bit | IPåœ°å€å­—æ®µä¸ºè™šæ‹Ÿè·¯ç”±å™¨çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªIPåœ°å€ã€‚IPåœ°å€çš„æ•°é‡åœ¨"Count IP Addrs"å­—æ®µä¸­è¯´æ˜Ž |\
|                     |       | - IPåœ°å€å­—æ®µç”¨äºŽé”™è¯¯é…ç½®è·¯ç”±å™¨æ—¶çš„æ•…éšœå®šä½å’Œè§£å†³ã€‚           |
| Authentication Data | 32bit | è®¤è¯å­—ç¬¦ä¸²ä»…ä»…ç”¨äºŽå¯¹RFC2338çš„å‘åŽå…¼å®¹                        |\
|                     |       | - åœ¨å‘é€VRRPæŠ¥æ–‡æ—¶è¯¥å­—æ®µåº”è¯¥è¢«ç½®ä¸º0ï¼Œè€Œåœ¨æŽ¥æ”¶VRRPæŠ¥æ–‡æ—¶è¯¥å­—æ®µåº”è¯¥è¢«å¿½ç•¥ |



# 2ã€æŠ¥æ–‡ç¤ºä¾‹

> æŠ¥æ–‡ç¤ºä¾‹

![æŠ¥æ–‡ç¤ºä¾‹](http://www.023wg.com/message/message/image/VRRP-example.png)
