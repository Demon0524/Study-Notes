#ğŸ•¸ï¸æ•°æ®åº“çŸ¥è¯†ç‚¹
## çº¦æŸ

åˆ†ç±»ï¼š

| çº¦æŸ  | æè¿°  | å…³é”®å­—  |
| ------------ | ------------ | ------------ |
| éç©ºçº¦æŸ  | é™åˆ¶è¯¥å­—æ®µçš„æ•°æ®ä¸èƒ½ä¸ºnull  | NOT NULL  |
| å”¯ä¸€çº¦æŸ  | ä¿è¯è¯¥å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„  | UNIQUE  |
| ä¸»é”®çº¦æŸ  | ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€  | PRIMARY KEY  |
| é»˜è®¤çº¦æŸ  | ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µçš„å€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼  | DEFAULT  |
| æ£€æŸ¥çº¦æŸï¼ˆ8.0.1ç‰ˆæœ¬åï¼‰  | ä¿è¯å­—æ®µå€¼æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶  | CHECK  |
| å¤–é”®çº¦æŸ  | ç”¨æ¥è®©ä¸¤å¼ å›¾çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§  | FOREIGN KEY  |

çº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„ï¼Œå¯ä»¥å†åˆ›å»ºè¡¨/ä¿®æ”¹è¡¨çš„æ—¶å€™æ·»åŠ çº¦æŸã€‚

### å¸¸ç”¨çº¦æŸ

| çº¦æŸæ¡ä»¶  | å…³é”®å­—  |
| ------------ | ------------ |
| ä¸»é”®  | PRIMARY KEY  |
| è‡ªåŠ¨å¢é•¿  | AUTO_INCREMENT  |
| ä¸ä¸ºç©º  | NOT NULL  |
| å”¯ä¸€  | UNIQUE  |
| é€»è¾‘æ¡ä»¶  | CHECK  |
| é»˜è®¤å€¼  | DEFAULT  |

ä¾‹å­ï¼š

```sql
create table user(
	id int primary key auto_increment,
	name varchar(10) not null unique,
	age int check(age > 0 and age < 120),
	status char(1) default '1',
	gender char(1)
);
```

### å¤–é”®çº¦æŸ

æ·»åŠ å¤–é”®ï¼š

```sql
CREATE TABLE è¡¨å(
	å­—æ®µå å­—æ®µç±»å‹,
	...
	[CONSTRAINT] [å¤–é”®åç§°] FOREIGN KEY(å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨(ä¸»è¡¨åˆ—å)
);
ALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨(ä¸»è¡¨åˆ—å);

-- ä¾‹å­
alter table emp add constraint fk_emp_dept_id foreign key(dept_id) references dept(id);
```


åˆ é™¤å¤–é”®ï¼š
`ALTER TABLE è¡¨å DROP FOREIGN KEY å¤–é”®å;`

#### åˆ é™¤/æ›´æ–°è¡Œä¸º

| è¡Œä¸º  | è¯´æ˜  |
| ------------ | ------------ |
| NO ACTION  | å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸RESTRICTä¸€è‡´ï¼‰  |
| RESTRICT  | å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸NO ACTIONä¸€è‡´ï¼‰  |
| CASCADE  | å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¹Ÿåˆ é™¤/æ›´æ–°å¤–é”®åœ¨å­è¡¨ä¸­çš„è®°å½•  |
| SET NULL  | å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™è®¾ç½®å­è¡¨ä¸­è¯¥å¤–é”®å€¼ä¸ºnullï¼ˆè¦æ±‚è¯¥å¤–é”®å…è®¸ä¸ºnullï¼‰  |
| SET DEFAULT  | çˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®è®¾ä¸ºä¸€ä¸ªé»˜è®¤å€¼ï¼ˆInnodbä¸æ”¯æŒï¼‰  |

æ›´æ”¹åˆ é™¤/æ›´æ–°è¡Œä¸ºï¼š
`ALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES ä¸»è¡¨å(ä¸»è¡¨å­—æ®µå) ON UPDATE è¡Œä¸º ON DELETE è¡Œä¸º;`
